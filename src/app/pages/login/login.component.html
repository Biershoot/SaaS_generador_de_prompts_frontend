<div class="auth-container">
  <mat-card class="login-card">
    <mat-card-header class="login-header">
      <mat-card-title class="login-title">
        <h2 class="title-text">Iniciar SesiÃ³n</h2>
      </mat-card-title>
      <mat-card-subtitle class="login-subtitle">
        Accede a tu cuenta para generar prompts increÃ­bles
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="login-content">
      <!-- BotÃ³n de prueba de conectividad -->
      <div class="backend-test-container">
        <button 
          mat-button 
          color="accent" 
          (click)="testBackendConnection()"
          class="test-backend-btn">
          ğŸ” Probar ConexiÃ³n Backend
        </button>
        <div *ngIf="backendStatus" class="backend-status">
          <span [class]="'status-' + backendStatus.type">
            {{ backendStatus.message }}
          </span>
        </div>
      </div>

      <form (ngSubmit)="login()" class="auth-form">
        <!-- Campo de Email -->
        <div class="form-field-container">
          <mat-form-field appearance="outline" class="full-width email-field">
            <mat-label>Correo ElectrÃ³nico</mat-label>
            <input 
              matInput 
              type="email" 
              [(ngModel)]="email" 
              name="email"
              placeholder="ejemplo@correo.com"
              required
              [class.invalid]="email && !isValidEmail(email)"
            >
            <mat-error *ngIf="email && !isValidEmail(email)">
              Por favor ingresa un email vÃ¡lido
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Campo de ContraseÃ±a -->
        <div class="form-field-container">
          <mat-form-field appearance="outline" class="full-width password-field">
            <mat-label>ContraseÃ±a</mat-label>
            <input 
              matInput 
              type="password"
              [(ngModel)]="password" 
              name="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              required
            >
            <mat-error *ngIf="password && password.length < 6">
              La contraseÃ±a debe tener al menos 6 caracteres
            </mat-error>
          </mat-form-field>
        </div>

        <!-- BotÃ³n de Login -->
        <div class="button-container">
          <button 
            mat-raised-button 
            color="primary" 
            type="submit" 
            class="auth-button full-width"
            [disabled]="loading || !email || !password || !isValidEmail(email)"
          >
            <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
            <span *ngIf="!loading" class="button-text">Iniciar SesiÃ³n</span>
          </button>
        </div>
      </form>

      <!-- InformaciÃ³n de credenciales de prueba -->
      <div class="test-credentials">
        <h3 class="credentials-title">Credenciales de Prueba</h3>
        <p class="credentials-description">Usa estas credenciales para probar la aplicaciÃ³n:</p>
        <div class="credentials-list">
          <div class="credential-item">
            <strong>Admin:</strong> admin@test.com / admin123
          </div>
          <div class="credential-item">
            <strong>Usuario:</strong> user@test.com / user123
          </div>
          <div class="credential-item">
            <strong>Test:</strong> test@test.com / test123
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions class="login-actions">
      <div class="auth-footer">
        <p class="footer-text">Â¿No tienes una cuenta?</p>
        <a routerLink="/register" class="register-link">RegÃ­strate aquÃ­</a>
      </div>
    </mat-card-actions>
  </mat-card>
</div>
